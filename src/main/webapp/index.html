<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">
        <meta name="author" content="Coderthemes">
        <link rel="shortcut icon" href="assets/images/favicon.ico">

        <title>Locadora de Automóveis</title>

        <link href="assets/css/custom.css" rel="stylesheet" type="text/css">
        <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="assets/css/icons.css" rel="stylesheet" type="text/css">
        <link href="assets/css/style_dark.css" rel="stylesheet" type="text/css">
        <script src="assets/js/jquery.min.js"></script>
        <link href="plugins/sweet-alert/sweetalert2.min.css" rel="stylesheet" type="text/css" />



        <script src="assets/js/modernizr.min.js"></script>

    </head>
    <body>

        <div class="wrapper-page">

            <div class="text-center">
                <a href="index.html" class="logo-lg"><i class="mdi mdi-radar"></i>  </a> <span class="title">Locadora de Automóveis</span>
            </div>

            <form class="form-horizontal m-t-20"  id="login" action="index.html">

                <div class="form-group row">
                    <div class="col-12">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="mdi mdi-account"></i></span>
                            </div>
                            <input class="form-control" type="email" id="usuario" required="" placeholder="Email">
                        </div>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-12">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="mdi mdi-key"></i></span>
                            </div>
                            <input class="form-control" type="password" id="password" required="" placeholder="Senha">
                        </div>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-12">
                        <div class="checkbox checkbox-primary">
                            <input id="checkbox-signup" type="checkbox">
                            <label for="checkbox-signup">
                                Manter-me Logado
                            </label>
                        </div>

                    </div>
                </div>

                <div class="form-group text-right m-t-20">
                    <div class="col-xs-12">
                        <button class="btn btn-primary btn-custom w-md waves-effect waves-light" type="submit" id="entrar">Entrar
                        </button>
                    </div>
                </div>

                <div class="form-group row m-t-30">
                    <div class="col-sm-7">
                        <a href="pages-recoverpw.html" class="text-muted"><i class="fa fa-lock m-r-5"></i> Esqueceu sua senha?</a>
                    </div>
                    <div class="col-sm-5 text-right">
                        <a href="pages-register.html" class="text-muted">Criar uma conta</a>
                    </div>
                </div>
            </form>
        </div>

        <script>

            var resizefunc = [];
            
            JOptionPane = {
                showMessageDialog: function (type, message) {
                    var title;
                    switch (type) {
                        case 'error':
                            title = 'Ops!';
                            break;
                        case 'warning':
                            title = 'Atenção';
                            break;
                        case 'success':
                            title = 'Sucesso';
                            break;
                        default:
                            title = 'Aguarde';
                            break;
                    }

                    return swal({
                        title: title,
                        text: message,
                        type: type,
                        showCancelButton: false,
                        confirmButtonClass: 'btn btn-confirm mt-2',
                        confirmButtonText: 'OK!'
                    });
                }
            };
            
            $('#login').submit(function (e) {
                e.preventDefault();
                $.ajax({
                    'url': 'login',
                    'type': 'POST',
                    'data': {
                        'usuario': $('#usuario').val(),
                        'senha': $('#password').val()
                    },
                    success: function (result) {
                        console.log(result.return);
                        if (result.return == 'error') {
                            JOptionPane.showMessageDialog('warning', 'Usuário ou senha incorretos!');
                        }

                        if (result.idCargo) {
                            location.href = 'jsp/home';
                        }

                    },
                    error: function () {
                        JOptionPane.showMessageDialog('warning', 'Usuário ou senha incorretos!');
                    }
                });
            });

        </script>

        <script src="assets/js/jquery.min.js"></script>
        <script src="plugins/sweet-alert/sweetalert2.min.js"></script>
        <script src="assets/pages/jquery.sweet-alert.init.js"></script>

    </body>
</html>